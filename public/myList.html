<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Good Games</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="container">

        <!-- Title -->
        <p class="title">
            <span class="bigLetter">G</span>ood
            <span class="bigLetter">G</span>ame
            <span class="bigLetter">S</span>
        </p>

        <!-- Auth Buttons -->

        <div class="sideMenu" id="sideMenu">
            <div class="hamburger" id="hamburger">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="sideMenuPanel" id="sideMenuPanel">
                <div class="hamburger" id="sideMenuHamburger">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <div class="sideMenuItems">
                    <div class="sideMenuItem">
                        <a href="Home.html" class="menuItem" id="homeLink">Home</a>
                    </div>
                    <div class="sideMenuItem" id="myListItem" style="display: none;">
                        <a href="myList.html" class="menuItem" id="myListLink">My List</a>
                    </div>
                    <div class="sideMenuItem">
                        <a href="search.html" class="menuItem" id="myListLink">Search</a>
                    </div>
                    <div class="sideMenuItem">
                        <a href="myList.html" class="menuItem" id="myListLink">Placeholder</a>
                    </div>
                    <div class="sideMenuItem">
                        <a href="about.html" class="menuItem" id="aboutLink">About</a>
                    </div>
                </div>
            </div>

        </div>


        <div class="myListContainer" id="myListContainer">
            <h2 class="listTitle" id="listTitle">My Games List</h2>
            <table id="myTable">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Title</th>
                        <th>Genre</th>
                        <th>Platforms</th>
                        <th>Release Year</th>
                        <th>Rating</th>
                    </tr>
                </thead>
                <tbody id="tableBody">

                </tbody>
            </table>
        </div>
    </div>
</body>
<style>
    img {
        max-width: 100px;
        border-radius: 8px;
    }
</style>

<script>

    const testTable = [
        {
            image: 'https://via.placeholder.com/100',
            title: 'Game 1',
            genre: 'Action',
            platforms: 'PC, PS5',
            releaseYear: 2022,
            rating: '9/10'
        },
        {
            image: 'https://via.placeholder.com/100',
            title: 'Game 2',
            genre: 'Adventure',
            platforms: 'Xbox, Switch',
            releaseYear: 2021,
            rating: '8.5/10'
        },
        {
            image: 'https://via.placeholder.com/100',
            title: 'Game 3',
            genre: 'RPG',
            platforms: 'PC, PS4',
            releaseYear: 2020,
            rating: '9.5/10'
        }
    ]

    const tbody = document.querySelector('#myTable tbody');

    testTable.forEach(game => {
        const row = document.createElement('tr');
        const imgCell = document.createElement('td');
        const img = document.createElement('img');

        if(game.image){
            img.src = game.image;
            img.alt = game.title;
            imgCell.appendChild(img);
            row.appendChild(imgCell);
        }
        else{
            imgCell.textContent = 'No Image';
        }
        
        ['title', 'genre', 'platforms', 'releaseYear', 'rating'].forEach(key => {
            const cell = document.createElement('td');
            cell.textContent = game[key];
            row.appendChild(cell);
        });

        tbody.appendChild(row);
    })



    document.getElementById('hamburger').addEventListener('click', function () {
        const panel = document.getElementById('sideMenuPanel');
        panel.classList.toggle('open');
    });

    document.getElementById('sideMenuHamburger').addEventListener('click', function () {
        const panel = document.getElementById('sideMenuPanel');
        panel.classList.remove('open');
    });

    function isTokenValid(token) {
        if (!token) return false;

        try {
            const payload = JSON.parse(atob(token.split('.')[1]));
            return payload.exp * 1000 > Date.now();
        }
        catch (e) {
            return false;
        }
    }

    window.addEventListener('DOMContentLoaded', () => {
        const token = localStorage.getItem('token');
        const sideMenuMyList = document.getElementById('myListItem');
        if (isTokenValid(token)) {
            sideMenuMyList.style.display = 'block';
        }
    })
</script>

</html>